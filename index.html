<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Order Pad</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app-header">
    <h1>Order Pad</h1>
    <div class="header-controls">
      <span class="pill" id="status">Saved locally</span>
      <button class="btn tab-btn active" data-tab="ordering" id="orderingTab">Order</button>
      <button class="btn tab-btn" data-tab="menu" id="menuTab">Edit Menu</button>
    </div>
  </div>

  <!-- Menu Editing Tab -->
  <div id="menuTabContent" class="tab-content">
    <div class="menu-grid">
      <!-- Menu Items Panel -->
      <div class="panel menu-items-panel">
        <div class="panel-header">
          <h2>Menu Items</h2>
          <div class="panel-actions">
            <button class="btn danger" id="resetDefaultBtn">Reset to defaults</button>
          </div>
        </div>
        
        <div class="add-item-section">
          <h3>Add New Item</h3>
          <div class="add-item-form">
            <input id="newName" placeholder="Item name" />
            <input id="newPrice" type="number" placeholder="Price" step="0.01" />
            <input id="newGroup" placeholder="Group (e.g., Food, Drinks)" />
            <input id="newColor" type="color" value="#6b7280" class="color-picker" title="Item color" />
            <button class="btn primary" id="addItemBtn">Add item</button>
          </div>
        </div>

        <div class="items-list">
          <h3>Current Items</h3>
          <div id="itemsEditor"></div>
        </div>
      </div>

      <!-- Menu Management Panel -->
      <div class="panel menu-management-panel">
        <div class="panel-header">
          <h2>Menu Management</h2>
        </div>

        <div class="section">
          <h3>Save & Load</h3>
          <div class="control-group">
            <button class="btn" id="saveMenuBtn">Save menu to file</button>
            <button class="btn" id="loadMenuBtn">Load menu from file</button>
            <input type="file" id="menuFileInput" accept=".json" style="display: none;" />
          </div>
        </div>

        <div class="section">
          <h3>Templates</h3>
          <div class="control-group">
            <select id="templateSelect" class="template-select"></select>
            <button class="btn" id="loadTemplateBtn">Load template</button>
          </div>
        </div>

        <div class="section">
          <h3>Menu JSON</h3>
          <div class="control-group">
            <textarea id="menuJsonText" rows="12" placeholder="Paste menu JSON here..." style="width: 100%; font-family: monospace; font-size: 12px; resize: vertical;"></textarea>
          </div>
          <div class="control-group">
            <button class="btn primary" id="loadJsonBtn">Load from JSON</button>
            <button class="btn" id="copyJsonBtn">Copy JSON</button>
          </div>
          <div class="muted">
            ðŸ’¡ Menu changes update the JSON above automatically. Click "Load from JSON" to apply changes from the textbox.
          </div>
        </div>

        <div class="help-text">
          <div class="muted">
            ðŸ’¡ Tip: All changes are automatically saved to your browser.
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Ordering Tab -->
  <div id="orderingTabContent" class="tab-content active">
    <div class="ordering-grid">
      <div class="panel order-panel">
        <div class="panel-header">
          <h2>Place Order</h2>
          <div class="panel-actions">
            <button class="btn danger" id="clearOrderBtn">Clear order</button>
          </div>
        </div>

        <div class="order-settings">
          <div class="setting-row">
            <label>Receipt Title</label>
            <input id="receiptTitle" value="Receipt" />
            <label>Discount %</label>
            <input type="number" id="discountPct" min="0" step="0.01" value="0" />
          </div>
        </div>

        <div class="menu-items">
          <h3>Menu Items</h3>
          <div id="itemButtons" class="item-buttons"></div>
        </div>

        <div class="current-order">
          <h3>Current Order</h3>
          <div id="orderTableWrap"></div>
        </div>
      </div>

      <div class="panel receipt-panel">
        <div class="panel-header">
          <h2>Receipt</h2>
          <div class="panel-actions">
            <button class="btn primary" id="copyBtn">Copy receipt</button>
            <button class="btn" id="selectBtn">Select all</button>
          </div>
        </div>
        
        <div class="total-display">
          <span id="totalLine" class="total-amount"></span>
        </div>
        
        <textarea id="receiptOut" spellcheck="false" class="receipt-output"></textarea>
        <div class="muted receipt-help">
          Output is plain text for easy paste into messages.
        </div>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>